{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://topdata.example/schema/context-definition.schema.json",
    "title": "Context Definition Document",
    "description": "Schema for AI context definition files with YAML frontmatter and structured content.",
    "type": "object",
    "required": ["meta", "content"],
    "additionalProperties": false,

    "properties": {
        "meta": {
            "type": "object",
            "description": "Frontmatter metadata",
            "required": [
                "description",
                "createdAt",
                "createdBy",
                "updatedAt",
                "updatedBy",
                "documentType"
            ],
            "additionalProperties": false,
            "properties": {
                "description": {
                    "type": "string",
                    "minLength": 3
                },
                "createdAt": {
                    "type": "string",
                    "format": "date"
                },
                "createdBy": {
                    "type": "string",
                    "minLength": 3
                },
                "updatedAt": {
                    "type": "string",
                    "format": "date"
                },
                "updatedBy": {
                    "type": "string",
                    "minLength": 3
                },
                "tags": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "minLength": 1
                    },
                    "uniqueItems": true
                },
                "documentType": {
                    "type": "string",
                    "enum": ["CONTEXT_DEFINITION"]
                },
                "version": {
                    "type": "string",
                    "pattern": "^v[0-9]+(\\.[0-9]+)*$",
                    "description": "Optional semantic-like version, e.g. v1 or v1.2"
                }
            }
        },

        "content": {
            "type": "object",
            "description": "Main document content",
            "required": ["basePath", "include"],
            "additionalProperties": false,
            "properties": {
                "basePath": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Root path used to resolve included files"
                },
                "include": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                        "type": "string",
                        "minLength": 1
                    },
                    "uniqueItems": true,
                    "description": "List of files or directories included in this context"
                }
            }
        }
    }
}
